[tox]
envlist =
    py38
    linters
    test

[testenv]
deps =
    -rrequirements.txt

[testenv:pylint]
commands =
    pip install youtube-dl
    pip install git+https://github.com/noembryo/pafy#egg=pafy
    pip install git+https://github.com/mts7/mts-logger@v0.2.4#egg=mts-logger
    pip install pylint==2.4
    pylint --exit-zero -d C0103,C0114 src

[testenv:flake8]
deps =
    flake8
    flake8-bugbear
    flake8-docstrings>=1.3.1
    flake8-typing-imports>=1.1
    pep8-naming
commands =
    flake8 --count --exit-zero src/ setup.py

[testenv:linters]
deps =
    {[testenv:flake8]deps}
commands =
    {[testenv:flake8]commands}
    {[testenv:pylint]commands}

[testenv:test]
deps =
    coverage
commands =
    pip install git+https://github.com/mts7/mts-logger@v0.2.4#egg=mts-logger
    coverage run -m pytest
    coverage report
